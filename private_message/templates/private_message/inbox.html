{% extends 'blog/base.html' %}
{% load static %}
{% block content %}

<h2>My Inbox</h2>
    
    <ul>
        {% for privatemessage in privatemessages %}
        <li>
                       
            <a href="{% url 'view_item' privatemessage.pk %}">{{ privatemessage.subject }}</a>
                <br>
                <span>From: {{ privatemessage.author.username }}</span>
                <span class="timestamp">{{ privatemessage.timestamp }}</span>
        </li>
        {% endfor %}
    </ul>
{% endblock %}


    <script>
        var unreadMessages = {{ unread_messages|safe }};
        
        document.addEventListener('DOMContentLoaded', function() {
            if (unreadMessages > 0) {
                showNotification('You have ' + unreadMessages + ' new messages.');
            }
        });

        function showNotification(message) {
            var notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(function() {
                notification.style.display = 'none';
            }, 5000); // 5000 milliseconds = 5 seconds
        }
    </script>
